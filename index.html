<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading History Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f4f4f9;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        th {
            background: #007bff;
            color: #fff;
        }
        form {
            max-width: 500px;
            margin: 0 auto 30px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, select, button {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
        }
        button {
            background: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .charts {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
        }
        canvas {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<h1>Trading History Dashboard</h1>

<form id="tradeForm">
    <h2>Add New Trade</h2>
    <input type="text" id="tradeName" placeholder="Trade Name" required>
    <input type="number" id="amount" placeholder="Amount" required>
    <select id="type" required>
        <option value="">Select Type</option>
        <option value="Buy">Buy</option>
        <option value="Sell">Sell</option>
    </select>
    <button type="submit">Add Trade</button>
</form>

<h2>Trade History Table</h2>
<table id="tradeTable">
    <thead>
        <tr>
            <th>#</th>
            <th>Trade Name</th>
            <th>Amount</th>
            <th>Type</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<div class="charts">
    <div>
        <h2>Trade Type Distribution</h2>
        <canvas id="pieChart" width="400" height="400"></canvas>
    </div>
    <div>
        <h2>Trade Amounts</h2>
        <canvas id="barChart" width="400" height="400"></canvas>
    </div>
</div>

<script>
let trades = JSON.parse(localStorage.getItem('trades')) || [];

const tradeForm = document.getElementById('tradeForm');
const tradeTable = document.getElementById('tradeTable').querySelector('tbody');

const pieCtx = document.getElementById('pieChart').getContext('2d');
const barCtx = document.getElementById('barChart').getContext('2d');

let pieChart = new Chart(pieCtx, {
    type: 'pie',
    data: {
        labels: ['Buy', 'Sell'],
        datasets: [{
            label: 'Trade Types',
            data: [0, 0],
            backgroundColor: ['#28a745', '#dc3545']
        }]
    }
});

let barChart = new Chart(barCtx, {
    type: 'bar',
    data: {
        labels: [],
        datasets: [{
            label: 'Amount',
            data: [],
            backgroundColor: '#007bff'
        }]
    },
    options: {
        scales: {
            y: { beginAtZero: true }
        }
    }
});

function updateTable() {
    tradeTable.innerHTML = '';
    trades.forEach((trade, index) => {
        let row = tradeTable.insertRow();
        row.insertCell(0).innerText = index + 1;
        row.insertCell(1).innerText = trade.name;
        row.insertCell(2).innerText = trade.amount;
        row.insertCell(3).innerText = trade.type;
    });
}

function updateCharts() {
    const buyCount = trades.filter(t => t.type === 'Buy').length;
    const sellCount = trades.filter(t => t.type === 'Sell').length;
    pieChart.data.datasets[0].data = [buyCount, sellCount];
    pieChart.update();

    barChart.data.labels = trades.map(t => t.name);
    barChart.data.datasets[0].data = trades.map(t => t.amount);
    barChart.update();
}

function saveToLocalStorage() {
    localStorage.setItem('trades', JSON.stringify(trades));
}

tradeForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const name = document.getElementById('tradeName').value;
    const amount = parseFloat(document.getElementById('amount').value);
    const type = document.getElementById('type').value;
    
    trades.push({name, amount, type});
    saveToLocalStorage();
    updateTable();
    updateCharts();
    
    tradeForm.reset();
});

// Initial load
updateTable();
updateCharts();
</script>

</body>
</html>
